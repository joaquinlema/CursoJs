<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>OOP V4</title>
</head>
<body>
<script>
function Persona(opciones){
	var _this = this; //self
	_this.nombre;
	_this.edad;
	var algo = "amigos ";	
	
	/*var constructor = function(n, e){
		_this.nombre = n;
		_this.edad = e;
	};
	constructor(nomb, edad);*/

	// CONSTRUCT : funcion autoejecutable
	(function(opc){

		var opc_final = {};
		opc_final.nombre = ("nombre" in opc)? opc.nombre : "sin nombre";
		opc_final.edad = (opc.edad && typeof opc.edad == "number")? opc.edad : 99;

		_this.nombre = opc_final.nombre;
		_this.edad = opc_final.edad;
	})(opciones);

	var bienvenida = function(){
		return "Hola! "+algo;
	};
	var validacion = function(edad){
		return (edad > 18);
	};
	_this.saludar = function(){
		console.log(bienvenida(),_this.nombre, _this.edad);
	};
	_this.cambiarEdad = function(nuevaEdad){
		if(validacion(nuevaEdad)){
			_this.edad = nuevaEdad;
		}				
	};
}

var nico = new Persona("Nicolas", 18); // window.Persona.call({}, "Nicolas", 18);		
nico.saludar();

var mica = new Persona("Micaela", 21);		
mica.saludar();

var alguien = new Persona();		
alguien.saludar();

var juan = new Persona("Juan");		
juan.saludar();

var abu = new Persona(undefined,78);		
abu.saludar();

</script>
</body>
</html>